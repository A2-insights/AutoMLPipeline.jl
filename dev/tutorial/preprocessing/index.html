<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Preprocessing · AutoMLPipeline Documentation</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">AutoMLPipeline Documentation</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">HOME</a></li><li><span class="tocitem">Tutorial</span><ul><li><a class="tocitem" href="../pipeline/">Pipeline</a></li><li class="is-active"><a class="tocitem" href>Preprocessing</a></li><li><a class="tocitem" href="../learning/">Model Training and Learning</a></li><li><a class="tocitem" href="../crossvalidation/">Crossvalidation</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../man/pipeline/">Pipeline</a></li><li><a class="tocitem" href="../../man/ensemble/">Ensembles</a></li><li><a class="tocitem" href="../../man/learners/">Learners</a></li><li><a class="tocitem" href="../../man/preprocessing/">Preprocessing</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../lib/typesfunctions/">Types and Functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorial</a></li><li class="is-active"><a href>Preprocessing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Preprocessing</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/IBM/AutoMLPipeline.jl/blob/master/docs/src/tutorial/preprocessing.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Preprocessing-1"><a class="docs-heading-anchor" href="#Preprocessing-1">Preprocessing</a><a class="docs-heading-anchor-permalink" href="#Preprocessing-1" title="Permalink"></a></h1><p>Let us start by loading the <code>diabetes</code> dataset:</p><pre><code class="language-julia">using AutoMLPipeline
using CSV
diabetesdf = CSV.read(joinpath(dirname(pathof(AutoMLPipeline)),&quot;../data/diabetes.csv&quot;))
X = diabetesdf[:,2:end]
Y = diabetesdf[:,1] |&gt; Vector</code></pre><p>We can check the data by showing the first 5 rows:</p><pre><code class="language-julia-repl">julia&gt; show5(df)=first(df,5); # show first 5 rows

julia&gt; show5(diabetesdf)
5×9 DataFrames.DataFrame
│ Row │ preg  │ plas  │ pres  │ skin  │ insu  │ mass    │ pedi    │ age   │ class           │
│     │ Int64 │ Int64 │ Int64 │ Int64 │ Int64 │ Float64 │ Float64 │ Int64 │ String          │
├─────┼───────┼───────┼───────┼───────┼───────┼─────────┼─────────┼───────┼─────────────────┤
│ 1   │ 6     │ 148   │ 72    │ 35    │ 0     │ 33.6    │ 0.627   │ 50    │ tested_positive │
│ 2   │ 1     │ 85    │ 66    │ 29    │ 0     │ 26.6    │ 0.351   │ 31    │ tested_negative │
│ 3   │ 8     │ 183   │ 64    │ 0     │ 0     │ 23.3    │ 0.672   │ 32    │ tested_positive │
│ 4   │ 1     │ 89    │ 66    │ 23    │ 94    │ 28.1    │ 0.167   │ 21    │ tested_negative │
│ 5   │ 0     │ 137   │ 40    │ 35    │ 168   │ 43.1    │ 2.288   │ 33    │ tested_positive │</code></pre><p>This dataset is a collection diagnostic tests among the  Pima Indians to investigate whether the patient shows  sign of diabetes or not based on certain features:</p><ul><li>Number of times pregnant</li><li>Plasma glucose concentration a 2 hours in an oral glucose tolerance test</li><li>Diastolic blood pressure (mm Hg)</li><li>Triceps skin fold thickness (mm)</li><li>2-Hour serum insulin (mu U/ml)</li><li>Body mass index (weight in kg/(height in m)^2)</li><li>Diabetes pedigree function</li><li>Age (years)</li><li>Class variable (0 or 1) indicating diabetec or not</li></ul><p>What is interesting with this dataset is that one or more numeric columns can be categorical and should be hot-bit encoded. One way to verify is  to compute the number of unique instances for each column and look for  columns with relatively smaller count:</p><pre><code class="language-julia-repl">julia&gt; [n=&gt;length(unique(x)) for (n,x) in eachcol(diabetesdf,true)] |&gt; collect
9-element Array{Pair{Symbol,Int64},1}:
  :preg =&gt; 17
  :plas =&gt; 136
  :pres =&gt; 47
  :skin =&gt; 51
  :insu =&gt; 186
  :mass =&gt; 248
  :pedi =&gt; 517
   :age =&gt; 52
 :class =&gt; 2</code></pre><p>Among the input columns, <code>preg</code> has only 17 unique instances and it can be treated as a categorical variable. However, its description indicates that the feature refers to the number of times the patient is pregnant and can be considered numerical. With this dillema, we need to figure out which representation provides better performance to our classifier. In order to test the two options, we can use the Feature Discriminator module to filter and transform the <code>preg</code> column to either numeric or categorical and choose the pipeline with the optimal performance.</p><h3 id="CatNumDiscriminator-for-Detecting-Categorical-Numeric-Features-1"><a class="docs-heading-anchor" href="#CatNumDiscriminator-for-Detecting-Categorical-Numeric-Features-1">CatNumDiscriminator for Detecting Categorical Numeric Features</a><a class="docs-heading-anchor-permalink" href="#CatNumDiscriminator-for-Detecting-Categorical-Numeric-Features-1" title="Permalink"></a></h3><p><em>Transform numeric columns with small unique instances to catergories.</em></p><p>Let us use <code>CatNumDiscriminator</code> which expects one argument to indicate the maximum number of unique instances in order to consider a particular column as categorical. For the sake of this discussion, let us use its  default value which is 24.</p><pre><code class="language-julia">using AutoMLPipeline, AutoMLPipeline.FeatureSelectors
using AutoMLPipeline.EnsembleMethods, AutoMLPipeline.CrossValidators
using AutoMLPipeline.DecisionTreeLearners, AutoMLPipeline.Pipelines
using AutoMLPipeline.BaseFilters, AutoMLPipeline.SKPreprocessors
using AutoMLPipeline.Utils

disc = CatNumDiscriminator()
@pipeline disc
tr_disc = fit_transform!(disc,X,Y)</code></pre><pre><code class="language-julia-repl">julia&gt; show5(tr_disc)
5×8 DataFrames.DataFrame
│ Row │ plas  │ pres  │ skin  │ insu  │ mass    │ pedi    │ age   │ class           │
│     │ Int64 │ Int64 │ Int64 │ Int64 │ Float64 │ Float64 │ Int64 │ String          │
├─────┼───────┼───────┼───────┼───────┼─────────┼─────────┼───────┼─────────────────┤
│ 1   │ 148   │ 72    │ 35    │ 0     │ 33.6    │ 0.627   │ 50    │ tested_positive │
│ 2   │ 85    │ 66    │ 29    │ 0     │ 26.6    │ 0.351   │ 31    │ tested_negative │
│ 3   │ 183   │ 64    │ 0     │ 0     │ 23.3    │ 0.672   │ 32    │ tested_positive │
│ 4   │ 89    │ 66    │ 23    │ 94    │ 28.1    │ 0.167   │ 21    │ tested_negative │
│ 5   │ 137   │ 40    │ 35    │ 168   │ 43.1    │ 2.288   │ 33    │ tested_positive │</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../pipeline/">« Pipeline</a><a class="docs-footer-nextpage" href="../learning/">Model Training and Learning »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 3 March 2020 17:26">Tuesday 3 March 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
